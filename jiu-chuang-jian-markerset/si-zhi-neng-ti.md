# （四）智能体

1.  XINGYING软件内置”无人机、无人车“两个智能体模型，在实时模式创建刚体或在后处理加载.cap数据后可对指定刚体绑定智能体，智能体图表包含“主仪表盘，速度仪表盘，俯仰角和翻滚角仪表盘，偏航角仪表盘”（9.4.1）。在智能体图表上绑定刚体后，图表中开始计时，各个仪表盘开始运作显示详细的数据；\


    <figure><img src="../.gitbook/assets/image (229).png" alt=""><figcaption><p>9.4.1</p></figcaption></figure>
2. 下面介绍无人机接入XINGYING的两种操作方法与注意事项：

### **本地连接**

1. 首先设置好无人机的数据转发端口，设置好端口后将无人机通电开机；
2.  将网线A插入路由器的LAN1口（9.4.2），网线A的另一端插入动捕镜头所在的交换机上，将网线B插入路由器的LAN2口，网线B的另一端插入动捕所在电脑的网口中（若电脑网口不够，可插入一个USB网线扩展在电脑上，将网线B插入扩展口中）；\


    <figure><img src="../.gitbook/assets/image (230).png" alt=""><figcaption><p>9.4.2</p></figcaption></figure>
3.  打开XINGYING，打开软件设置，选择“智能体设置”，设置监听端口（9.4.3），监听端口需和无人机设置的数据转发端口保持一致；\


    <figure><img src="../.gitbook/assets/image (231).png" alt=""><figcaption><p>9.4.3</p></figcaption></figure>
4. 连接镜头并播放，创建一个刚体，此时即可绑定智能体模型（9.4.4）。
5.  开启一个智能体图表（9.4.5），绑定创建的刚体，选择设备编号（若有多台无人机设备，下拉列表中会显示多个编号），选择类型为无人机，偏航角仪表盘中间会显示无人机的图标；\


    <figure><img src="../.gitbook/assets/image (235).png" alt=""><figcaption><p>9.4.4</p></figcaption></figure>



    <figure><img src="../.gitbook/assets/image (233).png" alt=""><figcaption><p>9.4.5</p></figcaption></figure>
6.  此时智能体窗口中的各个仪表盘便会显示出数据（9.4.6），在右上角会显示出无人机的实时电量，后处理模式智能体图表不会显示设备编号与电量，可拖拉图表右下角按钮对窗口大小进行缩放；\


    <figure><img src="../.gitbook/assets/image (236).png" alt=""><figcaption><p>9.4.6</p></figcaption></figure>



***

### **局域网**

1. 首先设置好无人机的数据转发端口，设置好端口后将无人机通电开机；
2. 使用局域网连接无人机应确保无人机的IP地址与动捕电脑的IP地址在同一网段，若不在同一网段，请设置好无人机的IP地址，同时设置好无人机的数据转发端口；
3. 在动捕所在电脑开启一个终端，输入“ssh pi@192.168.2.253”访问到无人机的机载电脑上，“192.168.2.253”为无人机的IP地址；
4.  再开启一个终端，输入roslaunch mavros px4.launch gcs\_url:="udp://@192.168.2.124:14550"。“192.168.2.124”为动捕所在电脑的IP地址，“14550”为XINGYING软件设置的无人机数据监听端口，也就是无人机设置的数据转发端口（9.4.7）。\


    <figure><img src="../.gitbook/assets/image (237).png" alt=""><figcaption><p>9.4.7</p></figcaption></figure>
5. 开启XINGYING，打开软件设置，选择“智能体设置”，设置监听端口，监听端口需和无人机设置的数据转发端口保持一致。开启地面站开关；
6. 连接镜头并播放，创建一个刚体，开启一个智能体窗口，绑定创建的刚体，选择设备编号，选择类型，此时智能体窗口中的各个仪表盘便会显示出数据，在右上角会显示出无人机的实时电量。



***

### 注意事项

{% hint style="warning" %}
切换实时模式或后处理模式，软件界面上所有的智能体图表会全部清除。重启智能体视图需要重新配置选项；

请在标定轴向（坐标系原点向上轴）为Z轴的环境下使用智能体功能；

若未显示出设备编号，请检查以下事项：

使用局域网通信无人机与动捕电脑IP是否在同一网段；

XINGYING地面站是否开启；

XINGYING接受端口与无人机数据转发端口是否一致；

自检无人机是否工作正常。
{% endhint %}

